import{$ as j,Gb as h,Hb as f,N as w,S as b,a as o,b as a,da as v,ea as I}from"./chunk-JPNOK5HP.js";function P(e){let t=h(()=>e());return K(t)?new Proxy(e,{get(n,r){return r in t?(v(n[r])||Object.defineProperty(n,r,{value:f(()=>n()[r]),configurable:!0}),P(n[r])):n[r]}}):e}var E=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function K(e){if(e===null||typeof e!="object"||A(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(E.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function A(e){return typeof e?.[Symbol.iterator]=="function"}var F=new WeakMap,i=Symbol("STATE_SOURCE");function p(e,...t){e[i].update(n=>t.reduce((r,s)=>o(o({},r),typeof s=="function"?s(r):s),n)),N(e)}function H(e){return e[i]()}function J(e){return F.get(e[i])||[]}function N(e){let t=J(e);for(let n of t){let r=h(()=>H(e));n(r)}}function M(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class c{constructor(){let u=r.reduce((d,C)=>C(d),U()),{stateSignals:l,props:W,methods:T,hooks:O}=u,m=o(o(o({},l),W),T);this[i]=u[i];for(let d of Reflect.ownKeys(m))this[d]=m[d];let{onInit:y,onDestroy:S}=O;y&&y(),S&&b(j).onDestroy(S)}static \u0275fac=function(l){return new(l||c)};static \u0275prov=w({token:c,factory:c.\u0275fac,providedIn:n.providedIn||null})}return c})()}function U(){return{[i]:I({}),stateSignals:{},props:{},methods:{},hooks:{}}}function q(e){return t=>{let n=e(o(o(o({[i]:t[i]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),a(o({},t),{props:o(o({},t.props),n)})}}function D(e){return q(e)}function k(e){return t=>{let n=e(o(o(o({[i]:t[i]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),a(o({},t),{methods:o(o({},t.methods),n)})}}function x(e){return t=>{let n=typeof e=="function"?e():e,r=Reflect.ownKeys(n);t[i].update(c=>o(o({},c),n));let s=r.reduce((c,g)=>{let u=f(()=>t[i]()[g]);return a(o({},c),{[g]:P(u)})},{});return a(o({},t),{stateSignals:o(o({},t.stateSignals),s)})}}var R=localStorage.getItem("wishlist"),z=R?JSON.parse(R):[],tt=M({providedIn:"root"},x({wishProducts:z}),D(e=>({totalCount:f(()=>e.wishProducts().length)})),k(e=>({addToFavourites:t=>{let n=e.wishProducts();if(!n.some(s=>s.id===t.id)){let s=[...n,t];p(e,{wishProducts:s}),localStorage.setItem("wishlist",JSON.stringify(s))}},removeFromFavourites:t=>{let n=e.wishProducts().filter(r=>r.id!==t);p(e,{wishProducts:n}),localStorage.setItem("wishlist",JSON.stringify(n))},inWish:t=>e.wishProducts().some(n=>n.id===t)})));export{tt as a};
